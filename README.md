# Gemini 文字转语音 App

这是一个基于 Google Gemini API 构建的文字转语音 (TTS) Web 应用程序，旨在提供流畅且可定制的语音生成体验。它采用分步式流程，引导用户从文本输入到语音播放和下载。

## 功能特性

*   **分步式工作流**: 应用程序分为三个清晰的步骤，确保用户体验直观且易于导航。
    1.  **输入原始文本并选择口语化风格**: 用户在此处输入或粘贴需要转换为语音的原始文本，并可以选择不同的口语化优化风格。
    2.  **确认优化文本与设置**: 显示经过口语化优化的文本，用户可以对其进行编辑。同时，可以灵活选择不同的 Gemini TTS 模型和多种语音风格。
    3.  **播放与下载语音**: 在此步骤中，用户可以播放生成的语音，进行暂停/停止操作，并下载音频文件。
*   **AI 驱动的文本口语化优化**: 应用程序现在通过 **Gemini 模型**提供智能的文本口语化优化功能，能够根据所选的风格将书面语转换为更自然、更地道的口语表达，包括调整语序、习惯用语、处理数字和缩写等。
    *   **口语化风格选择**: 提供至少 11 种预设口语化风格，例如：
        *   **标准口语**: 自然、流畅的日常表达。
        *   **正式演讲**: 庄重、清晰、有力的公共演讲语调。
        *   **日常闲聊**: 轻松、随意的日常对话风格。
        *   **故事讲述**: 引人入胜的叙述感和情感表达。
        *   **热情洋溢**: 充满热情和活力的表达。
        *   **平静舒缓**: 温和、柔和的语调。
        *   **信息传递**: 清晰、客观、高效地传递信息。
        *   **说服性**: 具有说服力，注重逻辑和情感共鸣。
        *   **幽默风趣**: 带有幽默感的轻松表达。
        *   **儿童故事**: 亲切、简单、充满童趣的讲述。
        *   **新闻报道**: 严谨、客观的新闻播报风格。
*   **可编辑的优化文本**: 优化后的文本在第二步中仍然可以手动编辑，允许用户进行微调以达到最佳效果。
*   **模型与语音风格选择**:
    *   **TTS 模型**: 支持选择 `gemini-2.5-flash-preview-tts` 模型进行语音生成。
    *   **多种语音风格**: 提供包括 Zephyr（标准）、Puck（活泼）、Charon（深沉）、Kore（清晰）和 Fenrir（洪亮）等在内的多种预设语音风格供用户选择。
*   **实时字数统计与 Token 预估**: 在原始文本输入框下方实时显示当前文本的字数，并提供一个近似的 Token 预估值，帮助用户了解文本长度。
*   **口语化规则浮动提示**: 在口语化优化功能旁提供问号图标，鼠标悬停时浮动显示详细的优化目标和 AI 优化方法。
*   **历史记录管理**:
    *   **持久化存储**: 自动将每次生成的历史记录保存在本地，即使关闭浏览器也能保留。
    *   **历史列表**: 在页面底部可折叠的区域显示所有历史记录，包含生成时间、口语风格、语音风格和优化文本预览。
    *   **加载功能**: 点击历史记录条目可将其内容和设置加载回主界面，方便重新生成或修改。
    *   **删除与清空**: 支持删除单个历史记录或一次性清空所有历史记录。
*   **音频播放与控制**:
    *   **即时播放**: 生成语音后可立即播放。
    *   **暂停/恢复**: 播放过程中可随时暂停和恢复。
    *   **停止播放**: 提供独立的“终止播放”按钮，可随时停止并重置播放。
    *   **交互禁用**: 在语音播放期间，除播放控制按钮外，其他所有界面元素将被禁用，确保操作的专注性。
*   **音频下载**: 生成的语音可以方便地下载为 `.wav` 格式文件。
*   **API 密钥管理**:
    *   通过 `process.env.API_KEY` 自动获取 API 密钥。
    *   集成了 Google AI Studio 的 API 密钥选择功能，引导用户安全地选择和管理其 API 密钥。
    *   在未选择有效 API 密钥时，提供明确的提示和账单信息链接。
*   **错误处理与加载指示**:
    *   全面的错误处理机制，能够捕获并显示 API 调用失败、密钥无效等常见问题。
    *   在文本优化和语音生成等耗时操作期间，显示加载指示器，提升用户体验。
*   **重新开始功能**: 在任何时候，用户都可以通过“重新开始”按钮清空所有输入和设置，并返回第一步。

## 如何使用

1.  **输入文本与选择风格**: 在第一步的文本框中输入您想要转换为语音的文本，并从下拉菜单中选择一个口语化风格。
2.  **优化与设置**: 点击“口语化优化”，文本将自动通过 AI 处理并跳转到第二步。您可以在此修改文本，并选择您喜欢的 TTS 模型和语音风格。
3.  **生成与播放**: 点击“确认并生成语音”来生成音频。生成完成后，您将进入第三步，可以播放、暂停、停止或下载语音。
4.  **管理 API 密钥**: 如果提示需要 API 密钥，请按照指示通过 Google AI Studio 选择或设置您的密钥。
5.  **查看历史记录**: 展开底部的“历史记录”区域，可以加载、删除或清空您之前的生成记录。

## 技术栈

*   **React**: 用于构建用户界面。
*   **TypeScript**: 提供类型安全。
*   **Tailwind CSS**: 用于快速且响应式的 UI 样式设计。
*   **@google/genai**: Google Gemini API 的官方 SDK，用于文本处理和文字转语音功能。
*   **Web Audio API**: 用于客户端音频解码和播放控制。
*   **localStorage**: 用于客户端历史记录持久化存储。
